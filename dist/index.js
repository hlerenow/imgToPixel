!function(t){var e={};function i(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/Users/leo/Documents/GitHub/imgToPixel/dist",i(i.s=4)}([function(t,e,i){"use strict";var r=class{constructor(t,e,i){this._pixelArry=t||[]}xyToIndex(t,e){let{_pixelArry:i}=this,r=0;return(r=i.width*(e-1)*4+4*(t-1))<0||r>=i.data.length?(console.warn("超出图片像素索引范围"),-1):r}get(t,e){let{_pixelArry:i}=this,r=this.xyToIndex(t,e);return r>-1?{r:i.data[r],g:i.data[r+1],b:i.data[r+2],a:i.data[r+3]/255}:{r:-1,g:-1,b:-1,a:-1}}set(t,e,i){let{_pixelArry:r}=this,a=this.xyToIndex(t,e);return!(a<0)&&(r.data[a]=i.r,r.data[a+1]=i.g,r.data[a+2]=i.b,r.data[a+3]=parseInt(255*i.a||255),r)}getAll(){return this._pixelArry}};class a{constructor({imgObj:t}={}){if(!t)throw new Error("imgObj 不能为空");this._canvasDom=null,this._canvasCtx=null,this._sourceImgObj=t,this._imgType="url",this._imgNatureWidth=0,this._imgNatureHeight=0,this._imgWidth=0,this._imgHeight=0,this._imgSize=0,this._sourcePixelData=[],this._readyOK=!1,this._readyFuncQueue=[],this.init()}checkImgObjType(t){let e="";return"string"==typeof t?e="url":t instanceof Image&&(e="ImageObj"),e}loadImagByUrl(t=""){var e=new Image;return e.crossOrigin="Anonymous",e.src=t,new Promise((t,i)=>{e.onload=(()=>{this._imgNatureWidth=e.naturalWidth||e.width,this._imgNatureHeight=e.naturalHeight||e.height,this._imgWidth=e.naturalWidth||e.width,this._imgHeight=e.naturalHeight||e.height,t(e)}),e.onerror=function(){i()}})}createCanvas(){let t=document.createElement("canvas");t.width=100,t.height=100;let e=t.getContext("2d");return{dom:t,ctx:e}}updateCanvasSize(t,e){this._canvasDom.style.width=t+"px",this._canvasDom.style.height=e+"px",this._canvasDom.width=t,this._canvasDom.height=e,this._canvasCtx.width=t,this._canvasCtx.height=e}drawImg(t,e,i){this._canvasCtx.drawImage(t,0,0,e,i)}async init(){let t=this.createCanvas();if(this._canvasDom=t.dom,this._canvasCtx=t.ctx,this._imgType=this.checkImgObjType(this._sourceImgObj),"url"===this._imgType){let t=await this.loadImagByUrl(this._sourceImgObj);this._sourceImgObj=t}else{this._sourceImgObj=this._sourceImgObj;let t=this._sourceImgObj;this._imgNatureWidth=t.naturalWidth||t.width,this._imgNatureHeight=t.naturalHeight||t.height,this._imgWidth=t.naturalWidth||t.width,this._imgHeight=t.naturalHeight||t.height}this._readyOK=!0,this.updateCanvasSize(this._imgNatureWidth,this._imgNatureHeight),this.runReadyQueue()}getPixel({width:t,height:e}={}){t=t||this._imgNatureWidth,e=e||this._imgNatureHeight,this.updateCanvasSize(t,e),this.drawImg(this._sourceImgObj,t,e);let i=this._canvasCtx.getImageData(0,0,t,e);return this._sourcePixelData=i,new r(this._sourcePixelData)}ready(t){this._readyOK?t.call(this,this):this._readyFuncQueue.push(t.bind(this,this))}runReadyQueue(){this._readyFuncQueue.map(t=>{t()})}}a.prototype.version="_VERSION_";e.a=a},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,i){"use strict";var r=i(0);class a{constructor(t){return new r.a(t)}}a.prototype.version="_VERSION_",e.a=a},,function(t,e,i){"use strict";i.r(e),function(t){var e,r,a,n=i(2);e=function(){return n.a},r="function"==typeof define,a=t.exports,r?define(e):a&&(t.exports=e()),window&&(window.ImgToPixel=e())}.call(this,i(1)(t))}]);